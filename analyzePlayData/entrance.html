<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>WACCA RATING ANALYZER</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
        <style>
            body {
                -webkit-text-size-adjust: 100%;
            };
        </style>
        <script>
            function paste() {
                const pasteText = document.querySelector('#playdata');
                pasteText.focus();
                document.execCommand('paste');
            };

            function analyze(){
                const playdata = document.querySelector('#playdata').value.split('\n');
                const scoresTable = document.querySelector('#scoresTable');

                playdata.forEach((song, index) => {
                    const tempRow = document.createElement('tr');
                    const tableRow = scoresTable.appendChild(tempRow);
                    const data = song.split(',');
                    const code = `
                        <td>${index}</td>    
                        <td>${data[0]}</td>
                        <td>${data[2]}</td>
                        <td></td>
                        <td>${data[3]}</td>
                        <td></td>
                        <td>${data[4]}</td>
                        <td></td>`;
                    tableRow.innerHTML = code;
                });
            };
        </script>
    </head>
    <body>
        <div class="container p-1">
            <nav class="navbar navbar-light bg-light border border-secondary ps-3 mt-3">
                <div class="navbar-brand">
                    WACCA RATING ANALYZER<small class="text-muted"> by <a href="https://twitter.com/shimmand" target="_blank" rel="noopener noreferrer">@shimmand</small></a>
                </div>
            </nav>
            <div class="form-floating">
                <textarea class="form-control" placeholder="Leave a comment here" id="playdata" style="height: 200px"></textarea>
                <label for="playdata">Playdata</label>
                <div class="btn-group" role="group" aria-label="Basic outlined example">
                    <button type="button" class="btn btn-outline-primary" id="paste" onclick="paste()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-arrow-up" viewBox="0 0 16 16">
                            <path d="M8.5 11.5a.5.5 0 0 1-1 0V7.707L6.354 8.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 7.707V11.5z"/>
                            <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                        </svg>
                        データを読込
                    </button>
                    <button type="button" class="btn btn-outline-primary" id="paste" onclick="analyze()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                        分析を実行
                    </button>
                    <button type="button" class="btn btn-outline-primary" id="paste" onclick="">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down-up" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5zm-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5z"/>
                        </svg>
                        隠す
                    </button>
                </div>
            </div>
            <div class="mt-2">
                <table class="table table-sm">
                    <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">曲名</th>
                          <th scope="col"><small style="color: #FED131">HARD</small><br>スコア</th>
                          <th scope="col"><small style="color: #FED131">HARD</small><br>定数</th>
                          <th scope="col"><small style="color: #FA0C98">EXPERT</small><br>スコア</th>
                          <th scope="col"><small style="color: #FA0C98">EXPERT</small><br>定数</th>
                          <th scope="col"><small style="color: #4A004F">INFERNO</small><br>スコア</th>
                          <th scope="col"><small style="color: #4A004F">INFERNO</small><br>定数</th>
                        </tr>
                    </thead>
                    <tbody id="scoresTable">
                    </tbody>
                </table>
            </div>
        </div>
    </body>
</html>
